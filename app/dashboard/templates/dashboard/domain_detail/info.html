{% extends 'dashboard/domain_detail/base.html' %} {% set domain_detail_page =
"info" %} {% block title %} {{ custom_domain.domain }} ä¿¡æ¯ {% endblock %} {%
block domain_detail_content %}
<h1 class="h3">
  {{ custom_domain.domain }} {% if custom_domain.verified %}
  <span
    class="cursor"
    data-toggle="tooltip"
    data-original-title="DNS è®¾ç½®æ­£ç¡®"
  >
    âœ…
  </span>
  {% else %}
  <span
    class="cursor"
    data-toggle="tooltip"
    data-original-title="DNS éœ€è¦è®¾ç½®"
  >
    <a
      href="{{ url_for('dashboard.domain_detail_dns', custom_domain_id=custom_domain.id) }}"
      class="text-decoration-none"
    >
      ğŸš«
    </a>
  </span>
  {% endif %}
</h1>

<div class="small-text">åˆ›å»ºäº {{ custom_domain.created_at | dt }}</div>

{{ nb_alias }} ä¸ªåˆ«å

<hr />
<div>Catch All</div>
  <div class="small-text">
    æ­¤åŠŸèƒ½å…è®¸æ‚¨å³æ—¶åˆ›å»ºåˆ«å
  <b>ã€‚ä¸‹æ¬¡æ‚¨éœ€è¦ç”µå­é‚®ä»¶åœ°å€æ—¶ï¼Œåªéœ€ä½¿ç”¨
  <em>anything@{{ custom_domain.domain }}</em>
  <br />
  åˆ«åå°†åœ¨ç¬¬ä¸€æ¬¡æ”¶åˆ°ç”µå­é‚®ä»¶æ—¶è‡ªåŠ¨åˆ›å»ºï¼Œå¹¶è‡ªåŠ¨å±äº
  <b>{{ custom_domain.domain }}</b>
  é‚®ç®±ï¼ˆ{% for mailbox in custom_domain.mailboxes %}
  <b>{{ mailbox.email }}</b>
  {% if not loop.last %},{% endif %} {% endfor %})
</div>

<div>
  <form method="post">
    <input
      type="hidden"
      name="form-name"
      value="switch-catch-all"
    />
    <label
      class="custom-switch cursor mt-2 pl-0"
      data-toggle="tooltip"
      {%
      if
      custom_domain.catch_all
      %}
      title="ç¦ç”¨ catch-all"
      {%
      else
      %}
      title="å¯ç”¨ catch-all"
      {%
      endif
      %}
    >
      <input type="checkbox" class="custom-switch-input" {{ "checked" if
      custom_domain.catch_all else "" }}>

      <span class="custom-switch-indicator"></span>
    </label>
  </form>
</div>

<hr />
<div>é»˜è®¤å‘ä»¶äººåç§°</div>
<div class="small-text">
  å½“æ‚¨é€šè¿‡åˆ«åå‘é€æˆ–å›å¤æ—¶ï¼Œæ­¤åç§°å°†ç”¨ä½œé»˜è®¤åˆ«åï¼Œé™¤éè¢«åˆ«åç‰¹å®šå‘ä»¶äººåç§°è¦†ç›–ã€‚
</div>

<div>
  <form method="post">
    <input
      type="hidden"
      name="form-name"
      value="set-name"
    />
    <div class="form-group">
      <input class="form-control" value="{{ custom_domain.name or "" }}"
      name="alias-name" placeholder="å‘ä»¶äººçš„åç§°ï¼šä½ ç”¨åˆ«åå‘é‚®ä»¶ï¼Œå¯¹æ–¹çœ‹åˆ°ä½ æ˜¯è°">
    </div>
    <button
      class="btn btn-primary"
      name="action"
      value="save"
    >
      ä¿å­˜
    </button>
    {% if custom_domain.name %}
    <button
      class="btn btn-danger float-right"
      name="action"
      value="remove"
    >
      ç§»é™¤
    </button>
    {% endif %}
  </form>
</div>

<hr />
<div>éšæœºå‰ç¼€ç”Ÿæˆ</div>
<div class="small-text">
  å¯ä»¥ä¸ºæ­¤åŸŸç”Ÿæˆä¸€ä¸ªéšæœºå‰ç¼€ï¼Œä»¥ä¾›æ–°åˆ«ååŠŸèƒ½ä½¿ç”¨ã€‚
</div>

<div>
  <form method="post">
    <input
      type="hidden"
      name="form-name"
      value="switch-random-prefix-generation"
    />
    <label
      class="custom-switch cursor mt-2 pl-0"
      data-toggle="tooltip"
      {%
      if
      custom_domain.random_prefix_generation
      %}
      title="ç¦ç”¨éšæœºå‰ç¼€ç”Ÿæˆ"
      {%
      else
      %}
      title="å¯ç”¨éšæœºå‰ç¼€ç”Ÿæˆ"
      {%
      endif
      %}
    >
      <input type="checkbox" class="custom-switch-input" {{ "checked" if
      custom_domain.random_prefix_generation else "" }}>

      <span class="custom-switch-indicator"></span>
    </label>
  </form>
</div>

<hr />
<h3 class="mb-0">åˆ é™¤åŸŸå</h3>
<div class="small-text mb-3">
  è¯·æ³¨æ„ï¼Œæ­¤æ“ä½œä¸å¯é€†ã€‚ä¸æ­¤åŸŸå…³è”çš„æ‰€æœ‰åˆ«åä¹Ÿå°†è¢«åˆ é™¤ã€‚
</div>

<form method="post">
  <input
    type="hidden"
    name="form-name"
    value="delete"
  />
  <span class="delete-custom-domain btn btn-outline-danger">åˆ é™¤åŸŸå</span>
</form>

{% endblock %} {% block script %}
<script>
  $('.custom-switch-input').change(function (e) {
    $(this).closest('form').submit()
  })

  $('.delete-custom-domain').on('click', function (e) {
    let that = $(this)

    bootbox.confirm({
      message:
        'ä¸ <b>{{ custom_domain.domain }}</b> å…³è”çš„æ‰€æœ‰åˆ«åä¹Ÿå°†è¢«åˆ é™¤ã€‚<br>' +
        'æ­¤æ“ä½œä¸å¯é€†ï¼Œè¯·ç¡®è®¤ã€‚',
      buttons: {
        confirm: {
          label: 'ç¡®è®¤åˆ é™¤',
          className: 'btn-danger',
        },
        cancel: {
          label: 'å–æ¶ˆ',
          className: 'btn-outline-primary',
        },
      },
      callback: function (result) {
        if (result) {
          that.closest('form').submit()
        }
      },
    })
  })
</script>
{% endblock %}
